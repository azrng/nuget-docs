import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as e,o as i,c as l,b as s,d as a,e as c,a as o}from"./app-bb4cf7f3.js";const p={},u=s("h2",{id:"azrng-settingconfig",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#azrng-settingconfig","aria-hidden":"true"},"#"),a(" Azrng.SettingConfig")],-1),d={href:"https://www.nuget.org/packages/SettingConfig#readme-body-tab",target:"_blank",rel:"noopener noreferrer"},r=o(`<h3 id="使用场景" tabindex="-1"><a class="header-anchor" href="#使用场景" aria-hidden="true">#</a> 使用场景</h3><p>安装该包后，通过简单对接数据库，就可以实现业务逻辑配置的数据库存储，支持页面修改、历史版本控制，代码中查询以及缓存处理。</p><h3 id="接入方案" tabindex="-1"><a class="header-anchor" href="#接入方案" aria-hidden="true">#</a> 接入方案</h3><p>注入服务配置</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> conn <span class="token operator">=</span> builder<span class="token punctuation">.</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;pgsql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddSettingConfig</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    options<span class="token punctuation">.</span>DbConnectionString <span class="token operator">=</span> conn<span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>DbSchema <span class="token operator">=</span> <span class="token string">&quot;sample&quot;</span><span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>RoutePrefix <span class="token operator">=</span> <span class="token string">&quot;configDashboard&quot;</span><span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>ApiRoutePrefix <span class="token operator">=</span> <span class="token string">&quot;/api/configDashboard&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用Dashboard界面</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>app.UseSettingDashboard();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>默认情况下启动项目访问 url/systemSetting进行访问</p><p>项目中如果需要查询配置信息进行注入服务IConfigExternalProvideService</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>var aa = await _configSettingService.GetConfigContentAsync(&quot;aaa&quot;);
// 或者
var aa = await _configSettingService.GetConfigAsync&lt;List&lt;string&gt;&gt;(&quot;aaa&quot;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="功能" tabindex="-1"><a class="header-anchor" href="#功能" aria-hidden="true">#</a> 功能</h2><ul><li><p>个性化配置</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> 页面标题设置</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> 页面路由设置</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> 页面加密访问</label></li></ul></li><li><p>系统配置界面</p><ul class="task-list-container"><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-3"> 列表展示</label></p><ul class="task-list-container"><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-4" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-4"> 配置名、配置key搜索</label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-5" disabled="disabled"><label class="task-list-item-label" for="task-item-5"> 版本筛选</label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-6" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-6"> 删除配置</label></p></li></ul></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-7" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-7"> 配置编辑</label></p></li><li class="task-list-item"><p><input type="checkbox" class="task-list-item-checkbox" id="task-item-8" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-8"> 历史配置</label></p></li></ul></li><li><p>存储</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-9" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-9"> pgsql存储</label></li></ul></li><li><p>使用</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-10" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-10"> 项目中查询</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-11" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-11"> 查询缓存</label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-12" disabled="disabled"><label class="task-list-item-label" for="task-item-12"> 支持初始化数据</label></li></ul></li></ul><h2 id="扩展" tabindex="-1"><a class="header-anchor" href="#扩展" aria-hidden="true">#</a> 扩展</h2><h3 id="basic认证" tabindex="-1"><a class="header-anchor" href="#basic认证" aria-hidden="true">#</a> Basic认证</h3><p>需要安装nuget包：Azrng.SettingConfig.BasicAuthorization ,然后</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> conn <span class="token operator">=</span> builder<span class="token punctuation">.</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;pgsql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddSettingConfig</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    options<span class="token punctuation">.</span>DbConnectionString <span class="token operator">=</span> conn<span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>DbSchema <span class="token operator">=</span> <span class="token string">&quot;sample&quot;</span><span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>RoutePrefix <span class="token operator">=</span> <span class="token string">&quot;configDashboard&quot;</span><span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>ApiRoutePrefix <span class="token operator">=</span> <span class="token string">&quot;/api/configDashboard&quot;</span><span class="token punctuation">;</span>
    options<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BasicAuthAuthorizationFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">BasicAuthAuthorizationFilterOptions</span>
        <span class="token punctuation">{</span>
            RequireSsl <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            SslRedirect <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            LoginCaseSensitive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            Users <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BasicAuthAuthorizationUser</span> <span class="token punctuation">{</span> Login <span class="token operator">=</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span> PasswordClear <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="缓存扩展" tabindex="-1"><a class="header-anchor" href="#缓存扩展" aria-hidden="true">#</a> 缓存扩展</h3><p>该项目默认使用内存缓存进行存储，你可以自行继承接口来替换默认的缓存方案。</p><ul><li>1.0.0 <ul><li>基本的Basic认证</li></ul></li></ul><h2 id="版本更新记录" tabindex="-1"><a class="header-anchor" href="#版本更新记录" aria-hidden="true">#</a> 版本更新记录</h2><ul><li>1.0.0 <ul><li>增加了历史版本配置的复制</li><li>增加Basic认证方案</li></ul></li><li>0.0.1 <ul><li>基本的配置更新</li></ul></li></ul>`,21);function k(b,m){const n=e("ExternalLinkIcon");return i(),l("div",null,[u,s("p",null,[a("该项目是一个业务配置维护的"),s("a",d,[a("Nuget包"),c(n)])]),r])}const g=t(p,[["render",k],["__file","settingConfig.html.vue"]]);export{g as default};
