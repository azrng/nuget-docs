import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as l,a as e,o as a}from"./app-DSgttSh5.js";const n={};function t(h,i){return a(),l("div",null,i[0]||(i[0]=[e(`<h2 id="common-db-core" tabindex="-1"><a class="header-anchor" href="#common-db-core"><span>Common.Db.Core</span></a></h2><p>一个数据库操作的核心库，包含一些公用类等</p><h3 id="版本更新记录" tabindex="-1"><a class="header-anchor" href="#版本更新记录"><span>版本更新记录</span></a></h3><ul><li><p>0.1.0</p><ul><li>命名空间迁移到Common.Core</li><li>增加表达式树帮助类Expressionable</li><li>增加RefAsync用于分页查询</li></ul></li><li><p>0.0.3</p><ul><li>增加NotNull静态分析</li><li>移除过期的方法</li><li>更新dbcore类库MarkEqual方法为扩展方法</li></ul></li><li><p>0.0.2</p><ul><li>迁移Common.EfCore的类到DBCore中</li></ul></li><li><p>0.0.1</p><ul><li>请求类和响应类处理</li></ul></li></ul><h2 id="common-efcore" tabindex="-1"><a class="header-anchor" href="#common-efcore"><span>Common.EFCore</span></a></h2><h3 id="操作例子" tabindex="-1"><a class="header-anchor" href="#操作例子"><span>操作例子</span></a></h3><p>只是包含EFCore公共Base类</p><p>Statrup的ConfigureServices方法添加</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>services.AddAutoGenerationId(); //增加自增ID</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>继承公共基类</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>IdentityBaseEntity、IdentityBaseEntity&lt;TKey&gt;</span></span>
<span class="line"><span>IdentityOperatorEntity、IdentityOperatorEntity&lt;Tkey&gt;</span></span>
<span class="line"><span>IdentityOperatorStatusEntity、  IdentityOperatorStatusEntity&lt;TKey&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>模型配置继承</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>EntityTypeConfigurationIdentity、EntityTypeConfigurationIdentity&lt;T, TKey&gt;</span></span>
<span class="line"><span>EntityTypeConfigurationIdentityOperator、EntityTypeConfigurationIdentityOperator&lt;T,TKey&gt;</span></span>
<span class="line"><span>EntityTypeConfigurationIdentityOperatorStatus、EntityTypeConfigurationIdentityOperatorStatus&lt;T, TKey&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="多上下文的情况" tabindex="-1"><a class="header-anchor" href="#多上下文的情况"><span>多上下文的情况</span></a></h4><p>注入示例</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">service</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddEntityFramework</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TestDbContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">           options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ConnectionString</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> connectionStr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">           options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Schema</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;public&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       })</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddUnitOfWork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TestDbContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">service</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddEntityFramework</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TestDb2Context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">           options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ConnectionString</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> connection2Str</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">           options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Schema</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;public&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       })</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddUnitOfWork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TestDb2Context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当需要获取IBaseRepository&lt;IEntity&gt;去操作数据库的时候，不能直接注入IBaseRepository&lt;IEntity&gt;，而应该是通过注入IUnitOfWork&lt;DbContext&gt;来获取，示例如下</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> unitOfWork</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> scope</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ServiceProvider</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetRequiredService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">IUnitOfWork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TestDbContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> testDb1Rep</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> unitOfWork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GetRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TestEntity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> content</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> Guid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NewGuid</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ToString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">await </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">testDb1Rep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TestEntity</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">content</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> flag</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> await </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">unitOfWork</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SaveChangesAsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Assert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">True</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">flag</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="版本更新记录-1" tabindex="-1"><a class="header-anchor" href="#版本更新记录-1"><span>版本更新记录</span></a></h3><ul><li>1.3.2 <ul><li>修复IUnitOfWork&lt;IEntity&gt;在多上下文中保存失败的问题</li></ul></li><li>1.3.1 <ul><li>移出调用工作单元的时候才添加IUnitOfWork，默认会添加一个IUnitOfWork</li></ul></li><li>1.3.0 <ul><li>适配Common.Db.Core的0.1.0版本</li><li>增加分页扩展ToPageListAsync</li></ul></li><li>1.3.0-beta4 <ul><li>修改方法SetDelete为SetDeleted</li><li>默认设置创建时间的时候使用无时区时间，防止pgsql出问题</li></ul></li><li>1.3.0-beta3 <ul><li>迁移Common.EfCore的类到DBCore中</li></ul></li><li>1.3.0-beta2 <ul><li>升级.Net8</li></ul></li><li>1.3.0-beta1 <ul><li>模型类优化</li><li>将pgsql中列的PropertyBuilderExtensions迁移到该程序集</li><li>增加BaseRepository作为公共的操作，且方法为虚方法</li><li>移除IBaseRepository中的同步方法</li></ul></li><li>1.2.1 <ul><li><p>查询请求类优化</p></li><li><p>QueryableExtensions类更新</p></li></ul></li><li>1.2.0 <ul><li>GetPageRequest增加一个查询关键字</li><li>将EFCoreExtension内容迁移到工作单元下</li><li>工作单元类需要单独注入，如services.AddUnitOfWork&lt;BaseDbContext&gt;();</li></ul></li><li>1.2.0-beta2 <ul><li>将创建时间修改时间等改为传入方案，用来应对pgsql的时间区分有时区无时区方案</li></ul></li><li>1.2.0-beta1 <ul><li>升级支持.net7</li></ul></li><li>1.0.0-beta8 <ul><li>增加表达式树扩展方法，替换nuget包System.Linq.Dynamic.Core</li></ul></li><li>1.0.0-beta7 <ul><li>增加执行SQL扩展</li><li>增加非追踪</li></ul></li><li>1.0.0-beta5 <ul><li>更新注册的方法从AddEntityBase变更为AddIdHelper()</li></ul></li><li>1.0.0-beta4 <ul><li>支持主键自定义类型</li></ul></li><li>1.1.0-beta3 <ul><li>增加分页相关的类</li><li>去除common包的依赖</li></ul></li><li>1.1.0-beta2 <ul><li>更新因为Common包升级导致的问题</li></ul></li><li>1.1.0-beta1 <ul><li>修改版本支持.net5、.net6、.netstandard2.1</li><li>修改OrderBy排序方法</li></ul></li><li>1.0.6 <ul><li>修改QueryableExtensions扩展，分页支持返回总条数，如果参数错误抛出异常</li></ul></li><li>1.0.5 <ul><li>修改QueryableExtensions扩展</li></ul></li><li>1.0.4 <ul><li>增加默认注入，支持单独使用该库的model类AddEntityBase</li><li>主键ID修改类型为long类型</li></ul></li><li>1.0.3 <ul><li>基本的base类封装</li><li>IBaseRepository接口编写</li><li>工作单元封装</li></ul></li></ul><h2 id="common-efcore-inmemory" tabindex="-1"><a class="header-anchor" href="#common-efcore-inmemory"><span>Common.EFCore.InMemory</span></a></h2><h3 id="操作例子-1" tabindex="-1"><a class="header-anchor" href="#操作例子-1"><span>操作例子</span></a></h3><h3 id="版本更新记录-2" tabindex="-1"><a class="header-anchor" href="#版本更新记录-2"><span>版本更新记录</span></a></h3><ul><li>1.3.0 <ul><li>增加默认注入IUnitOfWork</li></ul></li><li>1.3.0-beta2 <ul><li>支持.net8</li></ul></li><li>1.3.0-beta1 <ul><li>优化</li></ul></li><li>1.2.0 <ul><li>优化注入服务的方法</li><li>增加InMemoryRepository继承自BaseRepository和IBaseRepository</li></ul></li><li>1.2.0-beta1 <ul><li>升级支持.net7</li></ul></li><li>1.1.0-beta5 <ul><li>增加非追踪</li></ul></li><li>1.0.0-beta4 <ul><li>修改注入方法名称为AddEntityFramework</li></ul></li><li>1.1.0-beta3 <ul><li>增加分页相关的类</li><li>去除common包的依赖</li></ul></li><li>1.1.0-beta2 <ul><li>更新因为Common包升级导致的问题</li></ul></li><li>1.1.0-beta1 <ul><li>修改版本支持.net5、.net6、.netstandard2.1</li></ul></li><li>1.0.3 <ul><li>更新分页入参</li></ul></li><li>1.0.2 <ul><li>更新包版本</li></ul></li><li>1.0.1 <ul><li>基本操作内存数据库的封住哪个</li></ul></li></ul><h2 id="common-efcore-mysql" tabindex="-1"><a class="header-anchor" href="#common-efcore-mysql"><span>Common.EFCore.MySQL</span></a></h2><h3 id="操作例子-2" tabindex="-1"><a class="header-anchor" href="#操作例子-2"><span>操作例子</span></a></h3><h3 id="版本更新记录-3" tabindex="-1"><a class="header-anchor" href="#版本更新记录-3"><span>版本更新记录</span></a></h3><ul><li><p>1.3.0</p><ul><li>增加PostgreRepository继承自BaseRepository和IBaseRepository</li><li>增加默认注入IUnitOfWork</li></ul></li><li><p>1.2.0</p><ul><li>优化注入服务逻辑</li></ul></li><li><p>1.1.0</p><ul><li>升级支持.Net7</li><li>修复迁移的时候自定义配置未生效问题</li></ul></li><li><p>1.1.0-beta5</p><ul><li>增加非追踪</li></ul></li><li><p>1.1.0-beta4</p><ul><li>修改注入方法名称为AddEntityFramework</li></ul></li><li><p>1.1.0-beta3</p><ul><li>增加分页相关的类</li><li>去除common包的依赖</li></ul></li><li><p>1.1.0-beta2</p><ul><li>更新因为Common包升级导致的问题</li></ul></li><li><p>1.1.0-beta1</p><ul><li>修改版本支持.net5、.net6、.netstandard2.1</li><li>更新组件包版本</li></ul></li><li><p>0.0.3</p><ul><li>更新分页入参</li></ul></li><li><p>0.0.2</p><ul><li>封装简单方法</li></ul></li></ul><h2 id="common-efcore-postgressql" tabindex="-1"><a class="header-anchor" href="#common-efcore-postgressql"><span>Common.EFCore.PostgresSQL</span></a></h2><h4 id="操作例子-3" tabindex="-1"><a class="header-anchor" href="#操作例子-3"><span>操作例子</span></a></h4><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddEntityFramework</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AuthDbContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ConnectionString</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> Configuration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;DbConfig:Npgsql:ConnectionString&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Schema</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;auth&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="版本更新记录-4" tabindex="-1"><a class="header-anchor" href="#版本更新记录-4"><span>版本更新记录</span></a></h4><ul><li><p>1.3.0</p><ul><li>更新EFCore.NamingConventions包版本</li><li>增加默认注入IUnitOfWork</li></ul></li><li><p>1.3.0-beta2</p><ul><li>升级支持.Net8</li></ul></li><li><p>1.3.0-beta1</p><ul><li>增加PostgreRepository继承自BaseRepository和IBaseRepository</li></ul></li><li><p>1.2.0</p><ul><li>移除工作单元注入</li></ul></li><li><p>1.2.0-beta2</p><ul><li>新增设置时区的扩展方法</li><li>同步支持Common.EFCore设置时间方案</li></ul></li><li><p>1.2.0-beta1</p><ul><li>升级支持.net7</li></ul></li><li><p>1.1.0-beta4</p><ul><li>增加非追踪</li></ul></li><li><p>1.1.0-beta3</p><ul><li>修改注入方法名称为AddEntityFramework</li></ul></li><li><p>1.0.0-beta2</p><ul><li>解决不显示主键类型</li></ul></li><li><p>1.0.0-beta1</p><ul><li>修改版本支持.net5、.net6、.netstandard2.1</li></ul></li><li><p>0.0.3</p><ul><li>更新分页入参</li></ul></li><li><p>0.0.2</p><ul><li>封装简单方法</li></ul></li></ul><h2 id="common-efcore-sqlite" tabindex="-1"><a class="header-anchor" href="#common-efcore-sqlite"><span>Common.EFCore.SQLite</span></a></h2><h4 id="操作例子-4" tabindex="-1"><a class="header-anchor" href="#操作例子-4"><span>操作例子</span></a></h4><h4 id="版本更新记录-5" tabindex="-1"><a class="header-anchor" href="#版本更新记录-5"><span>版本更新记录</span></a></h4><ul><li>1.3.0 <ul><li>增加PostgreRepository继承自BaseRepository和IBaseRepository</li><li>增加默认注入IUnitOfWork</li></ul></li><li>1.2.0 <ul><li>移除工作单元注入</li></ul></li><li>1.1.2 <ul><li>修复迁移的时候自定义配置未生效问题</li></ul></li><li>1.1.1 <ul><li>移除Zack.EFCore.Batch.Sqlite_NET6包</li></ul></li><li>1.1.0 <ul><li>升级包版本，支持.net6、.net7</li></ul></li><li>1.0.0-beta3 <ul><li>升级包版本，支持.netstandard2.1和.net5以及.net6</li></ul></li><li>1.1.0-beta2 <ul><li>增加非追踪</li></ul></li><li>1.0.0-beta1 <ul><li>修改注入方法名称为AddEntityFramework</li></ul></li><li>0.0.3 <ul><li>更新分页入参</li></ul></li><li>0.0.2 <ul><li>封装简单方法</li></ul></li></ul><h2 id="common-efcore-sqlserver" tabindex="-1"><a class="header-anchor" href="#common-efcore-sqlserver"><span>Common.EFCore.SQLServer</span></a></h2><h4 id="操作例子-5" tabindex="-1"><a class="header-anchor" href="#操作例子-5"><span>操作例子</span></a></h4><h4 id="版本更新记录-6" tabindex="-1"><a class="header-anchor" href="#版本更新记录-6"><span>版本更新记录</span></a></h4><ul><li><p>1.3.0</p><ul><li>增加PostgreRepository继承自BaseRepository和IBaseRepository</li><li>支持.net7、.net8</li><li>增加默认注入IUnitOfWork</li></ul></li><li><p>1.0.0-beta3</p><ul><li>升级包版本，支持.net5和.net6</li></ul></li><li><p>1.1.0-beta2</p><ul><li>增加非追踪</li></ul></li><li><p>1.0.0-beta1</p><ul><li>修改注入方法名称为AddEntityFramework</li></ul></li><li><p>0.0.3</p><ul><li>更新分页入参</li></ul></li><li><p>0.0.2</p><ul><li>封装简单方法</li></ul></li></ul><h2 id="common-efcoreconfigurations-弃用" tabindex="-1"><a class="header-anchor" href="#common-efcoreconfigurations-弃用"><span>Common.EFCoreConfigurations(弃用)</span></a></h2><h3 id="操作例子-6" tabindex="-1"><a class="header-anchor" href="#操作例子-6"><span>操作例子</span></a></h3><div class="language-c# line-numbers-mode" data-highlighter="shiki" data-ext="c#" data-title="c#" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">AddMySQLService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">OpenDbContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Configuration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;DbConfig:Mysql:ConnectionString&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="版本更新记录-7" tabindex="-1"><a class="header-anchor" href="#版本更新记录-7"><span>版本更新记录</span></a></h3><blockquote><p>1.0.0 基本base实体类封装<br> 1.0.1 增加注释操作</p></blockquote>`,46)]))}const o=s(n,[["render",t],["__file","efcore.html.vue"]]),k=JSON.parse('{"path":"/nuget/efcore.html","title":"EFCore","lang":"zh-CN","frontmatter":{"title":"EFCore","lang":"zh-CN","date":"2023-07-20T00:00:00.000Z","publish":true,"author":"azrng","order":20,"category":["nuget"],"tag":["库"],"description":"Common.Db.Core 一个数据库操作的核心库，包含一些公用类等 版本更新记录 0.1.0 命名空间迁移到Common.Core 增加表达式树帮助类Expressionable 增加RefAsync用于分页查询 0.0.3 增加NotNull静态分析 移除过期的方法 更新dbcore类库MarkEqual方法为扩展方法 0.0.2 迁移Commo...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/nuget-docs/nuget-docs/nuget/efcore.html"}],["meta",{"property":"og:site_name","content":"AZRNG"}],["meta",{"property":"og:title","content":"EFCore"}],["meta",{"property":"og:description","content":"Common.Db.Core 一个数据库操作的核心库，包含一些公用类等 版本更新记录 0.1.0 命名空间迁移到Common.Core 增加表达式树帮助类Expressionable 增加RefAsync用于分页查询 0.0.3 增加NotNull静态分析 移除过期的方法 更新dbcore类库MarkEqual方法为扩展方法 0.0.2 迁移Commo..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-23T02:33:56.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"库"}],["meta",{"property":"article:published_time","content":"2023-07-20T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-23T02:33:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"EFCore\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-07-20T00:00:00.000Z\\",\\"dateModified\\":\\"2025-01-23T02:33:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"Common.Db.Core","slug":"common-db-core","link":"#common-db-core","children":[{"level":3,"title":"版本更新记录","slug":"版本更新记录","link":"#版本更新记录","children":[]}]},{"level":2,"title":"Common.EFCore","slug":"common-efcore","link":"#common-efcore","children":[{"level":3,"title":"操作例子","slug":"操作例子","link":"#操作例子","children":[{"level":4,"title":"多上下文的情况","slug":"多上下文的情况","link":"#多上下文的情况","children":[]}]},{"level":3,"title":"版本更新记录","slug":"版本更新记录-1","link":"#版本更新记录-1","children":[]}]},{"level":2,"title":"Common.EFCore.InMemory","slug":"common-efcore-inmemory","link":"#common-efcore-inmemory","children":[{"level":3,"title":"操作例子","slug":"操作例子-1","link":"#操作例子-1","children":[]},{"level":3,"title":"版本更新记录","slug":"版本更新记录-2","link":"#版本更新记录-2","children":[]}]},{"level":2,"title":"Common.EFCore.MySQL","slug":"common-efcore-mysql","link":"#common-efcore-mysql","children":[{"level":3,"title":"操作例子","slug":"操作例子-2","link":"#操作例子-2","children":[]},{"level":3,"title":"版本更新记录","slug":"版本更新记录-3","link":"#版本更新记录-3","children":[]}]},{"level":2,"title":"Common.EFCore.PostgresSQL","slug":"common-efcore-postgressql","link":"#common-efcore-postgressql","children":[{"level":4,"title":"操作例子","slug":"操作例子-3","link":"#操作例子-3","children":[]},{"level":4,"title":"版本更新记录","slug":"版本更新记录-4","link":"#版本更新记录-4","children":[]}]},{"level":2,"title":"Common.EFCore.SQLite","slug":"common-efcore-sqlite","link":"#common-efcore-sqlite","children":[{"level":4,"title":"操作例子","slug":"操作例子-4","link":"#操作例子-4","children":[]},{"level":4,"title":"版本更新记录","slug":"版本更新记录-5","link":"#版本更新记录-5","children":[]}]},{"level":2,"title":"Common.EFCore.SQLServer","slug":"common-efcore-sqlserver","link":"#common-efcore-sqlserver","children":[{"level":4,"title":"操作例子","slug":"操作例子-5","link":"#操作例子-5","children":[]},{"level":4,"title":"版本更新记录","slug":"版本更新记录-6","link":"#版本更新记录-6","children":[]}]},{"level":2,"title":"Common.EFCoreConfigurations(弃用)","slug":"common-efcoreconfigurations-弃用","link":"#common-efcoreconfigurations-弃用","children":[{"level":3,"title":"操作例子","slug":"操作例子-6","link":"#操作例子-6","children":[]},{"level":3,"title":"版本更新记录","slug":"版本更新记录-7","link":"#版本更新记录-7","children":[]}]}],"git":{"createdTime":1689867230000,"updatedTime":1737599636000,"contributors":[{"name":"azrng","username":"azrng","email":"itzhangyunpeng@163.com","commits":12,"url":"https://github.com/azrng"},{"name":"zhangyunpeng","username":"zhangyunpeng","email":"zhang.yunpeng@synyi.com","commits":4,"url":"https://github.com/zhangyunpeng"}]},"readingTime":{"minutes":4.64,"words":1391},"filePathRelative":"nuget/efcore.md","localizedDate":"2023年7月20日","autoDesc":true}');export{o as comp,k as data};
